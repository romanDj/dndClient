(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{118:function(e,t,n){e.exports=n(184)},127:function(e,t){},182:function(e,t,n){},184:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(37),o=n(2),l=n.n(o),i=n(36),u=n(11),p=n(30);n(127);var s=n(104);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d,O={appName:"Conduit",token:null,viewChangeCounter:0},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP_LOAD":return E({},e,{token:t.token||null,appLoaded:!0,currentUser:t.payload?t.payload.user:null});case"REDIRECT":return E({},e,{redirectTo:null});case"LOGOUT":return E({},e,{redirectTo:"/",token:null,currentUser:null});case"ARTICLE_SUBMITTED":var n="/article/".concat(t.payload.article.slug);return E({},e,{redirectTo:n});case"SETTINGS_SAVED":return E({},e,{redirectTo:t.error?null:"/",currentUser:t.error?null:t.payload.user});case"LOGIN":case"REGISTER":return E({},e,{redirectTo:t.error?null:"/",token:t.error?null:t.payload.user.token,currentUser:t.error?null:t.payload.user});case"DELETE_ARTICLE":return E({},e,{redirectTo:"/"});case"ARTICLE_PAGE_UNLOADED":case"EDITOR_PAGE_UNLOADED":case"HOME_PAGE_UNLOADED":case"PROFILE_PAGE_UNLOADED":case"PROFILE_FAVORITES_PAGE_UNLOADED":case"SETTINGS_PAGE_UNLOADED":case"LOGIN_PAGE_UNLOADED":case"REGISTER_PAGE_UNLOADED":return E({},e,{viewChangeCounter:e.viewChangeCounter+1});default:return e}},f=n(88),h=n(23),b=n(105),j=Object(h.a)(),k=Object(p.e)((d=j,Object(p.c)({common:y,router:Object(i.b)(d)})),Object(p.d)(Object(p.a)(b.a,Object(f.a)(j),(function(e){return function(t){return function(n){if((c=n.payload)&&"function"===typeof c.then){e.dispatch({type:"ASYNC_START",subtype:n.type});var r=e.getState().viewChangeCounter,a=n.skipTracking;n.payload.then((function(t){var c=e.getState();(a||c.viewChangeCounter===r)&&(console.log("RESULT",t),n.payload=t,e.dispatch({type:"ASYNC_END",promise:n.payload}),e.dispatch(n))}),(function(t){var c=e.getState();(a||c.viewChangeCounter===r)&&(console.log("ERROR",t),n.error=!0,n.payload=t.response.body,n.skipTracking||e.dispatch({type:"ASYNC_END",promise:n.payload}),e.dispatch(n))}))}else{var c;t(n)}}}}),(function(e){return function(e){return function(t){"REGISTER"===t.type||"LOGIN"===t.type?t.error||window.localStorage.setItem("jwt",t.payload.user.token):"LOGOUT"===t.type&&window.localStorage.setItem("jwt",""),e(t)}}})))),v=n(16),T=n(17),g=n(20),C=n(18),D=n(19),A=n(61),N=n(185),I=n(46),L=n(9),R=function(e){function t(e){var n;return Object(v.a)(this,t),(n=Object(g.a)(this,Object(C.a)(t).call(this,e))).state={current:"main"},n.handleClick=n.handleClick.bind(Object(A.a)(n)),n}return Object(D.a)(t,e),Object(T.a)(t,[{key:"handleClick",value:function(e){this.setState({current:e.key}),k.dispatch(Object(L.d)("/"+("main"!==e.key?e.key:"")))}},{key:"render",value:function(){return a.a.createElement(N.a,{onClick:this.handleClick,selectedKeys:[this.state.current],mode:"horizontal"},a.a.createElement(N.a.Item,{key:"main"},a.a.createElement(I.a,{type:"mail"}),a.a.createElement("span",null,"\u0413\u043b\u0430\u0432\u043d\u0430\u044f")),a.a.createElement(N.a.Item,{key:"profile"},a.a.createElement(I.a,{type:"appstore"}),a.a.createElement("span",null,"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442")),a.a.createElement(N.a.Item,{key:"alipay"},a.a.createElement(I.a,{type:"appstore"}),a.a.createElement("span",null,"\u0412\u043e\u0439\u0442\u0438")),a.a.createElement(N.a.Item,{key:"spells"},a.a.createElement(I.a,{type:"appstore"}),a.a.createElement("span",null,"\u0417\u0430\u043a\u043b\u0438\u043d\u0430\u043d\u0438\u044f")))}}]),t}(a.a.Component),_=function(e){function t(){return Object(v.a)(this,t),Object(g.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(D.a)(t,e),Object(T.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"profile-page"},"\u0413\u043b\u0430\u0432\u043d\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0441 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435\u043c \u0441\u0430\u0439\u0442\u0430")}}]),t}(a.a.Component),w=function(e){function t(){return Object(v.a)(this,t),Object(g.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(D.a)(t,e),Object(T.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"profile-page"},"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0441 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0435\u043c")}}]),t}(a.a.Component),S=function(e){function t(){return Object(v.a)(this,t),Object(g.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(D.a)(t,e),Object(T.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"profile-page"},"\u0417\u0430\u043a\u043b\u0438\u043d\u0430\u043d\u0438\u044f")}}]),t}(a.a.Component),P=function(e){function t(){return Object(v.a)(this,t),Object(g.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(D.a)(t,e),Object(T.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.redirectTo&&(k.dispatch(Object(L.d)(e.redirectTo)),this.props.onRedirect())}},{key:"componentWillMount",value:function(){window.localStorage.getItem("jwt")}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement(R,{appName:this.props.appName,currentUser:this.props.currentUser}),a.a.createElement(u.c,null,a.a.createElement(u.a,{exact:!0,path:"/",component:_}),a.a.createElement(u.a,{path:"/profile",component:w}),a.a.createElement(u.a,{path:"/spells",component:S}),a.a.createElement(u.a,{render:function(){return a.a.createElement("div",null,"Not found")}})))}}]),t}(a.a.Component),U=Object(c.c)((function(e){return{appLoaded:e.common.appLoaded,appName:e.common.appName,currentUser:e.common.currentUser,redirectTo:e.common.redirectTo}}),(function(e){return{onLoad:function(t,n){return e({type:"APP_LOAD",payload:t,token:n,skipTracking:!0})},onRedirect:function(){return e({type:"REDIRECT"})}}}))(P);n(182),n(183);l.a.render(a.a.createElement(c.a,{store:k},a.a.createElement(i.a,{history:j},a.a.createElement(u.c,null,a.a.createElement(u.a,{path:"/",component:U})))),document.getElementById("root"))}},[[118,1,2]]]);
//# sourceMappingURL=main.06cf1dfa.chunk.js.map